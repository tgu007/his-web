<form nz-form [formGroup]="newTextMedicinePrescriptionForm">
  <nz-spin [nzSpinning]="this.loading">
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="txtMedicine">药品</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24">
            <input
              nz-input
              formControlName="txtMedicine"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="selectFrequency" nzRequired>频次</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24" nzErrorTip="请选择频次">
            <nz-select
              nzShowSearch
              nzPlaceHolder="选择频次"
              formControlName="selectFrequency"
            >
              <nz-option *ngFor="let frequency of this.prescriptionService.frequencyList" [nzValue]="frequency.id"
                         [nzLabel]="frequency.code"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="txtQuantity" nzRequired>每次数量</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24" nzErrorTip="请注明数量">
            <input
              nz-input
              formControlName="txtQuantity"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="txtServeQuantity">每次剂量</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24" nzErrorTip="请注明剂量">
            <input
              nz-input
              formControlName="txtServeQuantity"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24">首日次数</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24">
            <nz-input-number
              nz-input
              formControlName="txtFirstDayQuantity"
              [nzStep]="1"
              [nzMin]="0"
            ></nz-input-number>
            次
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-control [nzSm]="20" [nzXs]="24">
            <label nz-checkbox formControlName="checkSelfPrepared">自备药</label>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24" nzRequired nzFor="selectUseMethod">途径</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24" nzErrorTip="请选择途径">
            <nz-select
              nzShowSearch
              nzServerSearch
              nzPlaceHolder="选择途径"
              formControlName="selectUseMethod"
              [nzFilterOption]="nzFilterOption"
              (nzOnSearch)="searchUserMethod($event)"
            >
              <nz-option *ngFor="let useMethod of this.useMethodList" [nzValue]="useMethod.id"
                         [nzLabel]="useMethod.code"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label [nzSm]="8" [nzXs]="24">滴速</nz-form-label>
          <nz-form-control [nzSm]="12" [nzXs]="24">
            <input
              nz-input
              formControlName="txtDropSpeed"
            />
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row hidden>
      <div nz-col nzSpan="16">
        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24">说明</nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24">
            <input
              nz-input
              formControlName="txtNote"
            />
          </nz-form-control>
        </nz-form-item>
      </div>

    </div>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-control>
            <label nz-checkbox #chkManualDate
                   formControlName="chkManualDate"
                   (nzCheckedChange)="chkManualDateChanged($event)"
            >补录医嘱</label>
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col nzSpan="12" [hidden]="!chkManualDate.nzChecked">
        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" [nzRequired]="chkManualDate.nzChecked">开始时间</nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24">
            <nz-date-picker
              nzShowTime
              nzFormat="yyyy-MM-dd HH:mm:ss"
              nzPlaceHolder="选择日期时间"
              formControlName="dateStartDateTime"
              nzSize="small"
              [nzDisabledDate]="disabledDate"
            ></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
  </nz-spin>
</form>








